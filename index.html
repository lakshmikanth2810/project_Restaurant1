<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SunnyBite Restaurant â€” Digital Menu</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container">
        <div class="header-row">
          <div class="brand-section">
          <h1 class="brand" data-i18n="restaurant">Restaurant</h1>
          <p class="brand-subtitle" data-i18n="premiumDining">Premium Dining Experience</p>
        </div>
          <div class="header-actions">
            <button id="cta-order" class="premium-order-btn ripple-container" type="button">
              <span class="order-icon">ğŸ›’</span>
              <span class="order-text" data-i18n="orderNow">Order Now</span>
              <span class="order-badge">
                <span id="cart-count" class="badge-count">0</span>
              </span>
              <span class="order-price">
                <span id="cart-total">$0.00</span>
              </span>
            </button>
            <div class="language-selector">
              <select id="language-select" class="language-dropdown">
                <option value="en">English</option>
                <option value="te">à°¤à±†à°²à±à°—à± (Telugu)</option>
                <option value="hi">à¤¹à¤¿à¤‚à¤¦à¥€ (Hindi)</option>
              </select>
            </div>
          </div>
        </div>
        <p class="tagline" data-i18n="tagline">ğŸŒŸ Fresh â€¢ Warm â€¢ Delicious ğŸŒŸ</p>
        <p class="tagline-subtitle" data-i18n="taglineSubtitle">Crafted with passion, served with love. Experience culinary excellence.</p>
      </div>
    </header>

    <main class="container">
      <section class="intro-section">
        <h2 class="intro-title" data-i18n="welcomeTitle">Welcome to Our Restaurant</h2>
        <p class="intro-text" data-i18n="welcomeText">Discover our carefully curated menu featuring the finest ingredients sourced locally. Each dish is prepared by our expert chefs with attention to detail and passion for excellence. Whether you're looking for a quick bite or a full dining experience, we have something special for you.</p>
      </section>

      <nav class="filter-bar" aria-label="Filter menu categories">
        <button class="filter-btn is-active" data-filter="all" type="button">
          <span class="filter-icon">ğŸ½ï¸</span>
          <span class="filter-label" data-i18n="allMenu">All Menu</span>
        </button>
        <button class="filter-btn" data-filter="starters" type="button">
          <span class="filter-icon">ğŸ¥—</span>
          <span class="filter-label" data-i18n="starters">Starters</span>
        </button>
        <button class="filter-btn" data-filter="mains" type="button">
          <span class="filter-icon">ğŸ</span>
          <span class="filter-label" data-i18n="mainCourses">Main Courses</span>
        </button>
        <button class="filter-btn" data-filter="desserts" type="button">
          <span class="filter-icon">ğŸ°</span>
          <span class="filter-label" data-i18n="desserts">Desserts</span>
        </button>
      </nav>

      <section class="menu-section" id="starters-section">
        <h2 class="section-title">
          <button class="pill pill-starters linklike" data-filter="starters" type="button"><span data-i18n="startersSection">ğŸ¥— Starters</span></button>
        </h2>
        <ul id="starters" class="menu-grid" aria-live="polite"></ul>
      </section>

      <section class="menu-section" id="mains-section">
        <h2 class="section-title">
          <button class="pill pill-mains linklike" data-filter="mains" type="button"><span data-i18n="mainCoursesSection">ğŸ Main Courses</span></button>
        </h2>
        <ul id="mains" class="menu-grid" aria-live="polite"></ul>
      </section>

      <section class="menu-section" id="desserts-section">
        <h2 class="section-title">
          <button class="pill pill-desserts linklike" data-filter="desserts" type="button"><span data-i18n="dessertsSection">ğŸ° Desserts</span></button>
        </h2>
        <ul id="desserts" class="menu-grid" aria-live="polite"></ul>
      </section>

      <div id="status" class="status" role="status" aria-live="polite"></div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h3>Restaurant</h3>
            <p>ğŸª 123 Culinary Street, Food City</p>
            <p>ğŸ“ (555) 123-4567</p>
            <p>ğŸ“§ hello@restaurant.com</p>
          </div>
          <div class="footer-section">
            <h3>Hours</h3>
            <p>Mon - Thu: 11:00 AM - 10:00 PM</p>
            <p>Fri - Sat: 11:00 AM - 11:00 PM</p>
            <p>Sunday: 12:00 PM - 9:00 PM</p>
          </div>
          <div class="footer-section">
            <h3>Follow Us</h3>
            <p>ğŸŒ Facebook â€¢ Instagram â€¢ Twitter</p>
            <p>â­ Rate us on Google & TripAdvisor</p>
          </div>
        </div>
        <div class="footer-bottom">
         <p>&copy; <span id="year"></span> Restaurant â€¢ Made with â¤ï¸ â€¢ All rights reserved</p>
        </div>
      </div>
    </footer>

    <div class="manager-access" aria-hidden="true">
      <button id="manager-orders" class="manager-btn" type="button" title="Manager orders">ğŸ“Š</button>
    </div>

    <!-- Order Modal -->
    <div id="order-modal" class="modal-overlay hidden" role="dialog" aria-labelledby="modal-title" aria-modal="true">
      <div class="modal">
        <div class="modal-header">
          <h2 id="modal-title" class="modal-title" data-i18n="yourOrder">Your Order</h2>
          <button class="modal-close" type="button" aria-label="Close modal">&times;</button>
        </div>
        <div class="modal-body">
          <div id="cart-contents"></div>
          <div class="cart-summary">
            <div class="summary-row">
              <span data-i18n="items">Items:</span>
              <span id="modal-item-count">0</span>
            </div>
            <div class="summary-row total">
              <strong data-i18n="total">Total:</strong>
              <strong id="modal-total">$0.00</strong>
            </div>
          </div>
          <div class="customer-info-section">
            <label for="customer-name"><strong data-i18n="customerName">Customer Name</strong></label>
            <input id="customer-name" type="text" name="customer-name" data-i18n-placeholder="enterCustomerName" placeholder="Enter customer name" autocomplete="name" />
          </div>
          <div class="order-type-section">
            <label><strong data-i18n="howWouldYouLikeOrder">How would you like your order?</strong></label>
            <div class="order-type-buttons">
              <button type="button" class="order-type-btn" data-type="Dine-in">
                <span class="order-type-icon">ğŸ½ï¸</span>
                <span class="order-type-label" data-i18n="dineIn">Dine-in</span>
              </button>
              <button type="button" class="order-type-btn" data-type="Takeout">
                <span class="order-type-icon">ğŸ“¦</span>
                <span class="order-type-label" data-i18n="takeout">Takeout</span>
              </button>
              <button type="button" class="order-type-btn" data-type="Delivery">
                <span class="order-type-icon">ğŸšš</span>
                <span class="order-type-label" data-i18n="delivery">Delivery</span>
              </button>
            </div>
            <input type="hidden" id="order-type" value="">
          </div>
          <div class="modal-actions">
            <button id="finalize-order" class="primary-cta" type="button" data-i18n="finalizeOrder">Finalize Order</button>
            <button id="cancel-order" class="secondary-btn" type="button" data-i18n="cancel">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Saved Orders Modal -->
    <div id="saved-orders-modal" class="modal-overlay hidden" role="dialog" aria-labelledby="saved-modal-title" aria-modal="true">
      <div class="modal saved-orders-modal-large">
        <div class="modal-header">
          <h2 id="saved-modal-title" class="modal-title">Saved Demo Orders</h2>
          <button id="saved-modal-close" class="modal-close" type="button" aria-label="Close modal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="orders-filters">
            <div class="filter-group">
              <label for="filter-order-type">Order Type:</label>
              <select id="filter-order-type" class="filter-select">
                <option value="">All Types</option>
                <option value="Dine-in">Dine-in</option>
                <option value="Takeout">Takeout</option>
                <option value="Delivery">Delivery</option>
              </select>
            </div>
            <div class="filter-group">
              <label for="filter-customer">Customer:</label>
              <input type="text" id="filter-customer" class="filter-input" placeholder="Search customer name..." />
            </div>
            <div class="filter-group">
              <label for="filter-date">Date:</label>
              <input type="date" id="filter-date" class="filter-input" />
            </div>
            <button id="reset-filters" class="secondary-btn" type="button">Reset Filters</button>
          </div>
          <div id="saved-orders-contents" class="orders-table-container">
            <!-- Saved orders table will be injected here -->
          </div>
          <div class="modal-actions">
            <button id="download-orders" class="primary-cta" type="button">Download Orders CSV</button>
            <button id="clear-saved-orders" class="secondary-btn" type="button">Clear Saved Orders</button>
            <button id="close-saved-orders" class="primary-cta" type="button">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      const currency = new Intl.NumberFormat(undefined, { style: "currency", currency: "USD" });

      // Translation object
      const translations = {
        en: {
          restaurant: "Restaurant",
          premiumDining: "Premium Dining Experience",
          tagline: "ğŸŒŸ Fresh â€¢ Warm â€¢ Delicious ğŸŒŸ",
          taglineSubtitle: "Crafted with passion, served with love. Experience culinary excellence.",
          orderNow: "Order Now",
          welcomeTitle: "Welcome to Our Restaurant",
          welcomeText: "Discover our carefully curated menu featuring the finest ingredients sourced locally. Each dish is prepared by our expert chefs with attention to detail and passion for excellence. Whether you're looking for a quick bite or a full dining experience, we have something special for you.",
          allMenu: "All Menu",
          starters: "Starters",
          mainCourses: "Main Courses",
          desserts: "Desserts",
          startersSection: "ğŸ¥— Starters",
          mainCoursesSection: "ğŸ Main Courses",
          dessertsSection: "ğŸ° Desserts",
          addToOrder: "Add to order",
          yourOrder: "Your Order",
          items: "Items:",
          total: "Total:",
          customerName: "Customer Name",
          enterCustomerName: "Enter customer name",
          howWouldYouLikeOrder: "How would you like your order?",
          dineIn: "Dine-in",
          takeout: "Takeout",
          delivery: "Delivery",
          finalizeOrder: "Finalize Order",
          cancel: "Cancel",
          // Menu items - Starters
          "Garlic Herb Bread": "Garlic Herb Bread",
          "Garlic Herb Bread_desc": "Toasted baguette with roasted garlic butter and parsley.",
          "Tomato Basil Bruschetta": "Tomato Basil Bruschetta",
          "Tomato Basil Bruschetta_desc": "Ripe tomatoes, basil, and olive oil on crispy ciabatta.",
          "Roasted Pumpkin Soup": "Roasted Pumpkin Soup",
          "Roasted Pumpkin Soup_desc": "Velvety pumpkin with a hint of nutmeg and cream.",
          // Menu items - Mains
          "Citrus Glazed Salmon": "Citrus Glazed Salmon",
          "Citrus Glazed Salmon_desc": "Pan-seared salmon with orange glaze, served with greens.",
          "Grilled Chicken Alfredo": "Grilled Chicken Alfredo",
          "Grilled Chicken Alfredo_desc": "Fettuccine tossed in creamy sauce with grilled chicken.",
          "Margherita Pizza": "Margherita Pizza",
          "Margherita Pizza_desc": "San Marzano tomato, fresh mozzarella, and basil.",
          "Veggie Power Bowl": "Veggie Power Bowl",
          "Veggie Power Bowl_desc": "Quinoa, roasted veggies, chickpeas, avocado, lemon tahini.",
          // Menu items - Desserts
          "Classic Tiramisu": "Classic Tiramisu",
          "Classic Tiramisu_desc": "Espresso-soaked ladyfingers with mascarpone and cocoa.",
          "Warm Apple Crumble": "Warm Apple Crumble",
          "Warm Apple Crumble_desc": "Spiced apples with a buttery crumble, served with vanilla.",
          "Lemon Cheesecake": "Lemon Cheesecake",
          "Lemon Cheesecake_desc": "Silky cheesecake with bright lemon zest and curd."
        },
        te: {
          restaurant: "à°°à±†à°¸à±à°Ÿà°¾à°°à±†à°‚à°Ÿà±",
          premiumDining: "à°ªà±à°°à±€à°®à°¿à°¯à°‚ à°¡à±ˆà°¨à°¿à°‚à°—à± à°…à°¨à±à°­à°µà°‚",
          tagline: "ğŸŒŸ à°¤à°¾à°œà°¾ â€¢ à°µà±†à°šà±à°šà°¨à°¿ â€¢ à°°à±à°šà°¿à°•à°°à°®à±ˆà°¨ ğŸŒŸ",
          taglineSubtitle: "à°…à°­à°¿à°°à±à°šà°¿à°¤à±‹ à°¤à°¯à°¾à°°à± à°šà±‡à°¯à°¬à°¡à°¿à°‚à°¦à°¿, à°ªà±à°°à±‡à°®à°¤à±‹ à°¸à±‡à°µ à°šà±‡à°¯à°¬à°¡à°¿à°‚à°¦à°¿. à°µà°‚à°Ÿà°•à°¾à°² à°¶à±à°°à±‡à°·à±à° à°¤à°¨à± à°…à°¨à±à°­à°µà°¿à°‚à°šà°‚à°¡à°¿.",
          orderNow: "à°‡à°ªà±à°ªà±à°¡à±‡ à°†à°°à±à°¡à°°à± à°šà±‡à°¯à°‚à°¡à°¿",
          welcomeTitle: "à°®à°¾ à°°à±†à°¸à±à°Ÿà°¾à°°à±†à°‚à°Ÿà±â€Œà°•à± à°¸à±à°µà°¾à°—à°¤à°‚",
          welcomeText: "à°¸à±à°¥à°¾à°¨à°¿à°•à°‚à°—à°¾ à°¸à±‡à°•à°°à°¿à°‚à°šà°¿à°¨ à°‰à°¤à±à°¤à°® à°ªà°¦à°¾à°°à±à°¥à°¾à°²à°¤à±‹ à°®à°¾ à°œà°¾à°—à±à°°à°¤à±à°¤à°—à°¾ à°à°‚à°ªà°¿à°• à°šà±‡à°¸à°¿à°¨ à°®à±†à°¨à±‚à°¨à± à°•à°¨à±à°—à±Šà°¨à°‚à°¡à°¿. à°ªà±à°°à°¤à°¿ à°µà°‚à°Ÿà°•à°‚ à°®à°¾ à°¨à°¿à°ªà±à°£à±à°² à°·à±†à°«à±â€Œà°²à°šà±‡ à°µà°¿à°µà°°à°¾à°²à°•à± à°¶à±à°°à°¦à±à°§ à°®à°°à°¿à°¯à± à°¶à±à°°à±‡à°·à±à° à°¤ à°•à±‹à°¸à°‚ à°…à°­à°¿à°°à±à°šà°¿à°¤à±‹ à°¤à°¯à°¾à°°à± à°šà±‡à°¯à°¬à°¡à°¿à°‚à°¦à°¿. à°®à±€à°°à± à°¶à±€à°˜à±à°° à°¨à°®à°²à°¡à°‚ à°•à±‹à°¸à°‚ à°šà±‚à°¸à±à°¤à±à°¨à±à°¨à°¾ à°²à±‡à°¦à°¾ à°ªà±‚à°°à±à°¤à°¿ à°¡à±ˆà°¨à°¿à°‚à°—à± à°…à°¨à±à°­à°µà°‚ à°•à±‹à°¸à°‚ à°šà±‚à°¸à±à°¤à±à°¨à±à°¨à°¾, à°®à±€ à°•à±‹à°¸à°‚ à°à°¦à±‹ à°ªà±à°°à°¤à±à°¯à±‡à°•à°®à±ˆà°¨à°¦à°¿ à°‰à°‚à°¦à°¿.",
          allMenu: "à°…à°¨à±à°¨à°¿ à°®à±†à°¨à±‚",
          starters: "à°¸à±à°Ÿà°¾à°°à±à°Ÿà°°à±â€Œà°²à±",
          mainCourses: "à°ªà±à°°à°§à°¾à°¨ à°µà°‚à°Ÿà°•à°¾à°²à±",
          desserts: "à°¡à±†à°œà°°à±à°Ÿà±â€Œà°²à±",
          startersSection: "ğŸ¥— à°¸à±à°Ÿà°¾à°°à±à°Ÿà°°à±â€Œà°²à±",
          mainCoursesSection: "ğŸ à°ªà±à°°à°§à°¾à°¨ à°µà°‚à°Ÿà°•à°¾à°²à±",
          dessertsSection: "ğŸ° à°¡à±†à°œà°°à±à°Ÿà±â€Œà°²à±",
          addToOrder: "à°†à°°à±à°¡à°°à±â€Œà°•à± à°œà±‹à°¡à°¿à°‚à°šà°‚à°¡à°¿",
          yourOrder: "à°®à±€ à°†à°°à±à°¡à°°à±",
          items: "à°µà°¸à±à°¤à±à°µà±à°²à±:",
          total: "à°®à±Šà°¤à±à°¤à°‚:",
          customerName: "à°•à°¸à±à°Ÿà°®à°°à± à°ªà±‡à°°à±",
          enterCustomerName: "à°•à°¸à±à°Ÿà°®à°°à± à°ªà±‡à°°à± à°¨à°®à±‹à°¦à± à°šà±‡à°¯à°‚à°¡à°¿",
          howWouldYouLikeOrder: "à°®à±€à°°à± à°®à±€ à°†à°°à±à°¡à°°à±â€Œà°¨à± à°à°²à°¾ à°•à±‹à°°à±à°•à±à°‚à°Ÿà°¾à°°à±?",
          dineIn: "à°¡à±ˆà°¨à±-à°‡à°¨à±",
          takeout: "à°Ÿà±‡à°•à±Œà°Ÿà±",
          delivery: "à°¡à±†à°²à°¿à°µà°°à±€",
          finalizeOrder: "à°†à°°à±à°¡à°°à±â€Œà°¨à± à°…à°‚à°¤à°¿à°®à±€à°•à°°à°¿à°‚à°šà°‚à°¡à°¿",
          cancel: "à°°à°¦à±à°¦à± à°šà±‡à°¯à°‚à°¡à°¿",
          // Menu items - Starters
          "Garlic Herb Bread": "à°µà±†à°²à±à°²à±à°²à°¿ à°®à±‚à°²à°¿à°• à°°à±Šà°Ÿà±à°Ÿà±†",
          "Garlic Herb Bread_desc": "à°µà±‡à°¯à°¿à°‚à°šà°¿à°¨ à°µà±†à°²à±à°²à±à°²à°¿ à°µà±†à°¨à±à°¨ à°®à°°à°¿à°¯à± à°ªà°¾à°°à±à°¸à±à°²à±€à°¤à±‹ à°µà±‡à°¯à°¿à°‚à°šà°¿à°¨ à°¬à°¾à°—à±à°¯à±à°Ÿà±.",
          "Tomato Basil Bruschetta": "à°Ÿà°®à°¾à°Ÿà±‹ à°¬à°¾à°¸à°¿à°²à± à°¬à±à°°à±à°¸à±à°šà±†à°Ÿà±à°Ÿà°¾",
          "Tomato Basil Bruschetta_desc": "à°•à±à°°à°¿à°¸à±à°ªà±€ à°¸à°¿à°¯à°¾à°¬à°¾à°Ÿà±à°Ÿà°¾à°ªà±ˆ à°ªà°‚à°¡à°¿à°¨ à°Ÿà°®à°¾à°Ÿà±‹à°²à±, à°¬à°¾à°¸à°¿à°²à± à°®à°°à°¿à°¯à± à°†à°²à°¿à°µà± à°†à°¯à°¿à°²à±.",
          "Roasted Pumpkin Soup": "à°µà±‡à°¯à°¿à°‚à°šà°¿à°¨ à°—à±à°®à±à°®à°¡à°¿à°•à°¾à°¯ à°¸à±‚à°ªà±",
          "Roasted Pumpkin Soup_desc": "à°¨à°Ÿà±à°®à±†à°—à± à°®à°°à°¿à°¯à± à°•à±à°°à±€à°®à± à°¯à±Šà°•à±à°• à°¸à±‚à°šà°¨à°¤à±‹ à°µà±†à°²à±à°µà±†à°Ÿà±€ à°—à±à°®à±à°®à°¡à°¿à°•à°¾à°¯.",
          // Menu items - Mains
          "Citrus Glazed Salmon": "à°¸à°¿à°Ÿà±à°°à°¸à± à°—à±à°²à±‡à°œà±à°¡à± à°¸à°¾à°²à±à°®à°¨à±",
          "Citrus Glazed Salmon_desc": "à°†à°°à±†à°‚à°œà± à°—à±à°²à±‡à°œà±â€Œà°¤à±‹ à°ªà°¾à°¨à±-à°¸à±€à°°à±à°¡à± à°¸à°¾à°²à±à°®à°¨à±, à°—à±à°°à±€à°¨à±à°¸à±â€Œà°¤à±‹ à°¸à°°à±à°µà± à°šà±‡à°¯à°¬à°¡à°¿à°‚à°¦à°¿.",
          "Grilled Chicken Alfredo": "à°—à±à°°à°¿à°²à± à°šà±‡à°¸à°¿à°¨ à°šà°¿à°•à±†à°¨à± à°†à°²à±à°«à±à°°à±†à°¡à±‹",
          "Grilled Chicken Alfredo_desc": "à°—à±à°°à°¿à°²à± à°šà±‡à°¸à°¿à°¨ à°šà°¿à°•à±†à°¨à±â€Œà°¤à±‹ à°•à±à°°à±€à°®à±€ à°¸à°¾à°¸à±â€Œà°²à±‹ à°Ÿà°¾à°¸à± à°šà±‡à°¸à°¿à°¨ à°«à±†à°Ÿà±à°Ÿà±à°¸à°¿à°¨à°¿.",
          "Margherita Pizza": "à°®à°¾à°°à±à°—à±†à°°à°¿à°Ÿà°¾ à°ªà°¿à°œà±à°œà°¾",
          "Margherita Pizza_desc": "à°¸à°¾à°¨à± à°®à°¾à°°à±à°œà°¾à°¨à±‹ à°Ÿà°®à°¾à°Ÿà±‹, à°¤à°¾à°œà°¾ à°®à±Šà°œà±à°œà°°à±†à°²à±à°²à°¾ à°®à°°à°¿à°¯à± à°¬à°¾à°¸à°¿à°²à±.",
          "Veggie Power Bowl": "à°µà±†à°œà±à°œà±€ à°ªà°µà°°à± à°¬à±Œà°²à±",
          "Veggie Power Bowl_desc": "à°•à±à°µà°¿à°¨à±‹à°µà°¾, à°µà±‡à°¯à°¿à°‚à°šà°¿à°¨ à°•à±‚à°°à°—à°¾à°¯à°²à±, à°šà°¿à°•à±à°ªà±€à°¸à±, à°…à°µà±‹à°•à°¾à°¡à±‹, à°²à±†à°®à°¨à± à°¤à°¹à°¿à°¨à°¿.",
          // Menu items - Desserts
          "Classic Tiramisu": "à°•à±à°²à°¾à°¸à°¿à°•à± à°Ÿà°¿à°°à°¾à°®à°¿à°¸à±",
          "Classic Tiramisu_desc": "à°®à°¸à±à°•à°°à±à°ªà±‹à°¨à± à°®à°°à°¿à°¯à± à°•à±‹à°•à±‹à°¤à±‹ à°à°¸à±à°ªà±à°°à±†à°¸à±‹-à°¨à°¾à°¨à°¬à°¡à°¿à°¨ à°²à±‡à°¡à±€à°«à°¿à°‚à°—à°°à±à°¸à±.",
          "Warm Apple Crumble": "à°µà±†à°šà±à°šà°¨à°¿ à°†à°ªà°¿à°²à± à°•à±à°°à°‚à°¬à±à°²à±",
          "Warm Apple Crumble_desc": "à°µà±†à°¨à°¿à°²à±à°²à°¾à°¤à±‹ à°¸à°°à±à°µà± à°šà±‡à°¸à°¿à°¨ à°¬à°Ÿà°°à± à°•à±à°°à°‚à°¬à±à°²à±â€Œà°¤à±‹ à°¸à±à°—à°‚à°§ à°¦à±à°°à°µà±à°¯à°¾à°² à°†à°ªà°¿à°²à±â€Œà°²à±.",
          "Lemon Cheesecake": "à°²à±†à°®à°¨à± à°šà±€à°œà±â€Œà°•à±‡à°•à±",
          "Lemon Cheesecake_desc": "à°ªà±à°°à°•à°¾à°¶à°µà°‚à°¤à°®à±ˆà°¨ à°²à±†à°®à°¨à± à°œà±†à°¸à±à°Ÿà± à°®à°°à°¿à°¯à± à°•à°°à±à°¡à±â€Œà°¤à±‹ à°¸à°¿à°²à±à°•à±€ à°šà±€à°œà±â€Œà°•à±‡à°•à±."
        },
        hi: {
          restaurant: "à¤°à¥‡à¤¸à¥à¤¤à¤°à¤¾à¤‚",
          premiumDining: "à¤ªà¥à¤°à¥€à¤®à¤¿à¤¯à¤® à¤¡à¤¾à¤‡à¤¨à¤¿à¤‚à¤— à¤…à¤¨à¥à¤­à¤µ",
          tagline: "ğŸŒŸ à¤¤à¤¾à¤œà¤¾ â€¢ à¤—à¤°à¥à¤® â€¢ à¤¸à¥à¤µà¤¾à¤¦à¤¿à¤·à¥à¤Ÿ ğŸŒŸ",
          taglineSubtitle: "à¤œà¥à¤¨à¥‚à¤¨ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤¤à¥ˆà¤¯à¤¾à¤°, à¤ªà¥à¤¯à¤¾à¤° à¤•à¥‡ à¤¸à¤¾à¤¥ à¤ªà¤°à¥‹à¤¸à¤¾ à¤—à¤¯à¤¾à¥¤ à¤ªà¤¾à¤• à¤‰à¤¤à¥à¤•à¥ƒà¤·à¥à¤Ÿà¤¤à¤¾ à¤•à¤¾ à¤…à¤¨à¥à¤­à¤µ à¤•à¤°à¥‡à¤‚à¥¤",
          orderNow: "à¤…à¤­à¥€ à¤‘à¤°à¥à¤¡à¤° à¤•à¤°à¥‡à¤‚",
          welcomeTitle: "à¤¹à¤®à¤¾à¤°à¥‡ à¤°à¥‡à¤¸à¥à¤¤à¤°à¤¾à¤‚ à¤®à¥‡à¤‚ à¤†à¤ªà¤•à¤¾ à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ",
          welcomeText: "à¤¸à¥à¤¥à¤¾à¤¨à¥€à¤¯ à¤°à¥‚à¤ª à¤¸à¥‡ à¤¸à¥‹à¤°à¥à¤¸ à¤•à¤¿à¤ à¤—à¤ à¤¬à¥‡à¤¹à¤¤à¤°à¥€à¤¨ à¤¸à¤¾à¤®à¤—à¥à¤°à¥€ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤¹à¤®à¤¾à¤°à¥‡ à¤¸à¤¾à¤µà¤§à¤¾à¤¨à¥€à¤ªà¥‚à¤°à¥à¤µà¤• à¤•à¥à¤¯à¥‚à¤°à¥‡à¤Ÿà¥‡à¤¡ à¤®à¥‡à¤¨à¥‚ à¤•à¥€ à¤–à¥‹à¤œ à¤•à¤°à¥‡à¤‚à¥¤ à¤ªà¥à¤°à¤¤à¥à¤¯à¥‡à¤• à¤µà¥à¤¯à¤‚à¤œà¤¨ à¤¹à¤®à¤¾à¤°à¥‡ à¤µà¤¿à¤¶à¥‡à¤·à¤œà¥à¤ à¤¶à¥‡à¤« à¤¦à¥à¤µà¤¾à¤°à¤¾ à¤µà¤¿à¤¸à¥à¤¤à¤¾à¤° à¤ªà¤° à¤§à¥à¤¯à¤¾à¤¨ à¤”à¤° à¤‰à¤¤à¥à¤•à¥ƒà¤·à¥à¤Ÿà¤¤à¤¾ à¤•à¥‡ à¤²à¤¿à¤ à¤œà¥à¤¨à¥‚à¤¨ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤¤à¥ˆà¤¯à¤¾à¤° à¤•à¤¿à¤¯à¤¾ à¤œà¤¾à¤¤à¤¾ à¤¹à¥ˆà¥¤ à¤šà¤¾à¤¹à¥‡ à¤†à¤ª à¤à¤• à¤¤à¥à¤µà¤°à¤¿à¤¤ à¤¨à¤¾à¤¶à¥à¤¤à¤¾ à¤¢à¥‚à¤‚à¤¢ à¤°à¤¹à¥‡ à¤¹à¥‹à¤‚ à¤¯à¤¾ à¤ªà¥‚à¤°à¥à¤£ à¤¡à¤¾à¤‡à¤¨à¤¿à¤‚à¤— à¤…à¤¨à¥à¤­à¤µ, à¤¹à¤®à¤¾à¤°à¥‡ à¤ªà¤¾à¤¸ à¤†à¤ªà¤•à¥‡ à¤²à¤¿à¤ à¤•à¥à¤› à¤–à¤¾à¤¸ à¤¹à¥ˆà¥¤",
          allMenu: "à¤¸à¤­à¥€ à¤®à¥‡à¤¨à¥‚",
          starters: "à¤¸à¥à¤Ÿà¤¾à¤°à¥à¤Ÿà¤°",
          mainCourses: "à¤®à¥à¤–à¥à¤¯ à¤µà¥à¤¯à¤‚à¤œà¤¨",
          desserts: "à¤¡à¥‡à¤œà¤¼à¤°à¥à¤Ÿ",
          startersSection: "ğŸ¥— à¤¸à¥à¤Ÿà¤¾à¤°à¥à¤Ÿà¤°",
          mainCoursesSection: "ğŸ à¤®à¥à¤–à¥à¤¯ à¤µà¥à¤¯à¤‚à¤œà¤¨",
          dessertsSection: "ğŸ° à¤¡à¥‡à¤œà¤¼à¤°à¥à¤Ÿ",
          addToOrder: "à¤‘à¤°à¥à¤¡à¤° à¤®à¥‡à¤‚ à¤œà¥‹à¤¡à¤¼à¥‡à¤‚",
          yourOrder: "à¤†à¤ªà¤•à¤¾ à¤‘à¤°à¥à¤¡à¤°",
          items: "à¤†à¤‡à¤Ÿà¤®:",
          total: "à¤•à¥à¤²:",
          customerName: "à¤—à¥à¤°à¤¾à¤¹à¤• à¤•à¤¾ à¤¨à¤¾à¤®",
          enterCustomerName: "à¤—à¥à¤°à¤¾à¤¹à¤• à¤•à¤¾ à¤¨à¤¾à¤® à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚",
          howWouldYouLikeOrder: "à¤†à¤ª à¤…à¤ªà¤¨à¤¾ à¤‘à¤°à¥à¤¡à¤° à¤•à¥ˆà¤¸à¥‡ à¤šà¤¾à¤¹à¥‡à¤‚à¤—à¥‡?",
          dineIn: "à¤¡à¤¾à¤‡à¤¨-à¤‡à¤¨",
          takeout: "à¤Ÿà¥‡à¤•à¤†à¤‰à¤Ÿ",
          delivery: "à¤¡à¤¿à¤²à¥€à¤µà¤°à¥€",
          finalizeOrder: "à¤‘à¤°à¥à¤¡à¤° à¤…à¤‚à¤¤à¤¿à¤® à¤°à¥‚à¤ª à¤¦à¥‡à¤‚",
          cancel: "à¤°à¤¦à¥à¤¦ à¤•à¤°à¥‡à¤‚",
          // Menu items - Starters
          "Garlic Herb Bread": "à¤²à¤¹à¤¸à¥à¤¨ à¤œà¤¡à¤¼à¥€ à¤¬à¥‚à¤Ÿà¥€ à¤°à¥‹à¤Ÿà¥€",
          "Garlic Herb Bread_desc": "à¤­à¥à¤¨à¥‡ à¤¹à¥à¤ à¤²à¤¹à¤¸à¥à¤¨ à¤®à¤•à¥à¤–à¤¨ à¤”à¤° à¤…à¤œà¤®à¥‹à¤¦ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤Ÿà¥‹à¤¸à¥à¤Ÿà¥‡à¤¡ à¤¬à¥ˆà¤—à¥à¤à¤Ÿà¥¤",
          "Tomato Basil Bruschetta": "à¤Ÿà¤®à¤¾à¤Ÿà¤° à¤¤à¥à¤²à¤¸à¥€ à¤¬à¥à¤°à¥à¤¶à¥‡à¤Ÿà¤¾",
          "Tomato Basil Bruschetta_desc": "à¤•à¥à¤°à¤•à¥à¤°à¥‡ à¤¸à¤¿à¤¯à¤¾à¤¬à¤Ÿà¥à¤Ÿà¤¾ à¤ªà¤° à¤ªà¤•à¥‡ à¤Ÿà¤®à¤¾à¤Ÿà¤°, à¤¤à¥à¤²à¤¸à¥€ à¤”à¤° à¤œà¥ˆà¤¤à¥‚à¤¨ à¤•à¤¾ à¤¤à¥‡à¤²à¥¤",
          "Roasted Pumpkin Soup": "à¤­à¥à¤¨à¥€ à¤¹à¥à¤ˆ à¤•à¤¦à¥à¤¦à¥‚ à¤¸à¥‚à¤ª",
          "Roasted Pumpkin Soup_desc": "à¤œà¤¾à¤¯à¤«à¤² à¤”à¤° à¤•à¥à¤°à¥€à¤® à¤•à¥€ à¤à¤²à¤• à¤•à¥‡ à¤¸à¤¾à¤¥ à¤®à¤–à¤®à¤²à¥€ à¤•à¤¦à¥à¤¦à¥‚à¥¤",
          // Menu items - Mains
          "Citrus Glazed Salmon": "à¤¸à¤¾à¤‡à¤Ÿà¥à¤°à¤¸ à¤—à¥à¤²à¥‡à¤œà¤¼à¥à¤¡ à¤¸à¥ˆà¤²à¥à¤®à¤¨",
          "Citrus Glazed Salmon_desc": "à¤¨à¤¾à¤°à¤‚à¤—à¥€ à¤—à¥à¤²à¥‡à¤œà¤¼ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤ªà¥ˆà¤¨-à¤¸à¥€à¤¯à¤° à¤¸à¥ˆà¤²à¥à¤®à¤¨, à¤¹à¤°à¥€ à¤¸à¤¬à¥à¤œà¤¿à¤¯à¥‹à¤‚ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤ªà¤°à¥‹à¤¸à¤¾ à¤œà¤¾à¤¤à¤¾ à¤¹à¥ˆà¥¤",
          "Grilled Chicken Alfredo": "à¤—à¥à¤°à¤¿à¤²à¥à¤¡ à¤šà¤¿à¤•à¤¨ à¤…à¤²à¥à¤«à¥à¤°à¥‡à¤¡à¥‹",
          "Grilled Chicken Alfredo_desc": "à¤—à¥à¤°à¤¿à¤²à¥à¤¡ à¤šà¤¿à¤•à¤¨ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤•à¥à¤°à¥€à¤®à¥€ à¤¸à¥‰à¤¸ à¤®à¥‡à¤‚ à¤Ÿà¥‰à¤¸ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾ à¤«à¥‡à¤Ÿà¥à¤¸à¤¿à¤¨à¥€à¥¤",
          "Margherita Pizza": "à¤®à¤¾à¤°à¥à¤—à¥‡à¤°à¤¿à¤Ÿà¤¾ à¤ªà¤¿à¤œà¥à¤œà¤¾",
          "Margherita Pizza_desc": "à¤¸à¥ˆà¤¨ à¤®à¤¾à¤°à¥à¤œà¤¼à¤¾à¤¨à¥‹ à¤Ÿà¤®à¤¾à¤Ÿà¤°, à¤¤à¤¾à¤œà¤¾ à¤®à¥‹à¤œà¤¼à¥‡à¤°à¥‡à¤²à¤¾ à¤”à¤° à¤¤à¥à¤²à¤¸à¥€à¥¤",
          "Veggie Power Bowl": "à¤µà¥‡à¤œà¥€ à¤ªà¤¾à¤µà¤° à¤¬à¤¾à¤‰à¤²",
          "Veggie Power Bowl_desc": "à¤•à¥à¤µà¤¿à¤¨à¥‹à¤†, à¤­à¥à¤¨à¥€ à¤¹à¥à¤ˆ à¤¸à¤¬à¥à¤œà¤¿à¤¯à¤¾à¤‚, à¤›à¥‹à¤²à¥‡, à¤à¤µà¥‹à¤•à¤¾à¤¡à¥‹, à¤¨à¥€à¤‚à¤¬à¥‚ à¤¤à¤¾à¤¹à¤¿à¤¨à¥€à¥¤",
          // Menu items - Desserts
          "Classic Tiramisu": "à¤•à¥à¤²à¤¾à¤¸à¤¿à¤• à¤Ÿà¤¿à¤°à¤¾à¤®à¤¿à¤¸à¥",
          "Classic Tiramisu_desc": "à¤®à¤¸à¥à¤•à¤¾à¤°à¤ªà¥‹à¤¨ à¤”à¤° à¤•à¥‹à¤•à¥‹ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤à¤¸à¥à¤ªà¥à¤°à¥‡à¤¸à¥‹-à¤¸à¥‹à¤–à¤¾ à¤²à¥‡à¤¡à¥€à¤«à¤¿à¤‚à¤—à¤°à¥à¤¸à¥¤",
          "Warm Apple Crumble": "à¤—à¤°à¥à¤® à¤¸à¥‡à¤¬ à¤•à¥à¤°à¤‚à¤¬à¤²",
          "Warm Apple Crumble_desc": "à¤®à¤•à¥à¤–à¤¨ à¤•à¥à¤°à¤‚à¤¬à¤² à¤•à¥‡ à¤¸à¤¾à¤¥ à¤®à¤¸à¤¾à¤²à¥‡à¤¦à¤¾à¤° à¤¸à¥‡à¤¬, à¤µà¥‡à¤¨à¤¿à¤²à¤¾ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤ªà¤°à¥‹à¤¸à¤¾ à¤œà¤¾à¤¤à¤¾ à¤¹à¥ˆà¥¤",
          "Lemon Cheesecake": "à¤¨à¥€à¤‚à¤¬à¥‚ à¤šà¥€à¤œà¤¼à¤•à¥‡à¤•",
          "Lemon Cheesecake_desc": "à¤‰à¤œà¥à¤œà¥à¤µà¤² à¤¨à¥€à¤‚à¤¬à¥‚ à¤œà¤¼à¥‡à¤¸à¥à¤Ÿ à¤”à¤° à¤¦à¤¹à¥€ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤°à¥‡à¤¶à¤®à¥€ à¤šà¥€à¤œà¤¼à¤•à¥‡à¤•à¥¤"
        }
      };

      // Language management
      let currentLanguage = localStorage.getItem('restaurant_language') || 'en';

      function setLanguage(lang) {
        currentLanguage = lang;
        localStorage.setItem('restaurant_language', lang);
        
        // Update all elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(element => {
          const key = element.getAttribute('data-i18n');
          if (translations[lang] && translations[lang][key]) {
            element.textContent = translations[lang][key];
          }
        });

        // Update placeholders
        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
          const key = element.getAttribute('data-i18n-placeholder');
          if (translations[lang] && translations[lang][key]) {
            element.placeholder = translations[lang][key];
          }
        });

        // Update language selector
        const langSelect = document.getElementById('language-select');
        if (langSelect) langSelect.value = lang;
        
        // Update all "Add to order" buttons in menu items (including dynamically created ones)
        // First, update all buttons with the data-i18n attribute
        document.querySelectorAll('.item-cta[data-i18n="addToOrder"]').forEach(btn => {
          btn.textContent = getTranslation('addToOrder');
        });
        
        // Also find and update any "Add to order" buttons by their text content
        // This catches buttons that might have been created before language was set
        const allItemButtons = document.querySelectorAll('.item-cta');
        const addToOrderTexts = {
          en: 'Add to order',
          te: 'à°†à°°à±à°¡à°°à±â€Œà°•à± à°œà±‹à°¡à°¿à°‚à°šà°‚à°¡à°¿',
          hi: 'à¤‘à¤°à¥à¤¡à¤° à¤®à¥‡à¤‚ à¤œà¥‹à¤¡à¤¼à¥‡à¤‚'
        };
        
        allItemButtons.forEach(btn => {
          const currentText = btn.textContent.trim();
          // Check if button text matches any language version of "Add to order"
          if (Object.values(addToOrderTexts).some(text => currentText === text)) {
            btn.setAttribute('data-i18n', 'addToOrder');
            btn.textContent = getTranslation('addToOrder');
          }
        });
        
        // Update menu item names and descriptions
        document.querySelectorAll('[data-i18n-item-name]').forEach(element => {
          const originalName = element.getAttribute('data-i18n-item-name');
          const translatedName = getTranslation(originalName);
          if (translatedName) {
            element.textContent = translatedName;
          }
        });
        
        document.querySelectorAll('[data-i18n-item-desc]').forEach(element => {
          const originalName = element.getAttribute('data-i18n-item-desc');
          const descKey = originalName + "_desc";
          const translatedDesc = getTranslation(descKey);
          if (translatedDesc) {
            element.textContent = translatedDesc;
          }
        });
      }

      function getTranslation(key) {
        return translations[currentLanguage]?.[key] || translations.en[key] || key;
      }

      function text(node) {
        return node?.textContent?.trim() ?? "";
      }

      function createMenuItemElement(name, price, description, imageUrl, priceValue) {
        const li = document.createElement("li");
        li.className = "menu-item";
        li.tabIndex = 0;
        // Store original name for translation lookup
        li.setAttribute("data-original-name", name);

        if (imageUrl) {
          const media = document.createElement("div");
          media.className = "item-media";
          const img = document.createElement("img");
          const cacheBust = (imageUrl.includes("?") ? "&" : "?") + "v=" + Date.now();
          img.src = imageUrl + cacheBust;
          img.alt = name;
          img.loading = "lazy";
          media.appendChild(img);
          li.appendChild(media);
        }

        const title = document.createElement("div");
        title.className = "item-name";
        title.setAttribute("data-i18n-item-name", name);
        title.textContent = getTranslation(name) || name;

        const trailing = document.createElement("div");
        trailing.className = "item-price";
        trailing.textContent = price;

        const desc = document.createElement("p");
        desc.className = "item-desc";
        desc.setAttribute("data-i18n-item-desc", name);
        const descKey = name + "_desc";
        desc.textContent = getTranslation(descKey) || description;

        // CTA
        const cta = document.createElement("button");
        cta.className = "item-cta ripple-container";
        cta.type = "button";
        cta.setAttribute("data-i18n", "addToOrder");
        cta.textContent = getTranslation("addToOrder");
        cta.addEventListener("click", (e) => {
          incrementCart(name, priceValue);
          spawnRipple(e, cta);
        });

        // Content row
        li.appendChild(title);
        li.appendChild(trailing);
        if (description) li.appendChild(desc);
        li.appendChild(cta);
        return li;
      }

      function renderCategory(xmlDoc, tagName, targetId) {
        const container = document.getElementById(targetId);
        const nodes = xmlDoc.getElementsByTagName(tagName)[0]?.getElementsByTagName("item") ?? [];
        container.innerHTML = "";
        for (let i = 0; i < nodes.length; i++) {
          const item = nodes[i];
          const name = text(item.getElementsByTagName("name")[0]);
          const priceRaw = text(item.getElementsByTagName("price")[0]);
          const desc = text(item.getElementsByTagName("description")[0]);
          const imageUrl = text(item.getElementsByTagName("image")[0]);
          const numeric = !isNaN(Number(priceRaw)) ? Number(priceRaw) : 0;
          const price = priceRaw && !isNaN(Number(priceRaw)) ? currency.format(numeric) : priceRaw;
          container.appendChild(createMenuItemElement(name, price, desc, imageUrl, numeric));
        }
      }

      async function loadMenu() {
        const status = document.getElementById("status");
        try {
          status.textContent = "Loading menuâ€¦";
          const response = await fetch(`menu.xml?v=${Date.now()}`, { cache: "no-store" });
          if (!response.ok) throw new Error("Failed to load menu.xml");
          const xmlText = await response.text();
          const parser = new DOMParser();
          const xmlDoc = parser.parseFromString(xmlText, "application/xml");
          const parseError = xmlDoc.getElementsByTagName("parsererror")[0];
          if (parseError) throw new Error("Invalid XML format");

          renderCategory(xmlDoc, "starters", "starters");
          renderCategory(xmlDoc, "mains", "mains");
          renderCategory(xmlDoc, "desserts", "desserts");
          setupReveal();
          // Ensure all menu item buttons use the current language
          document.querySelectorAll('.item-cta[data-i18n="addToOrder"]').forEach(btn => {
            btn.textContent = getTranslation('addToOrder');
          });
          status.textContent = "";
        } catch (err) {
          status.textContent = "Could not load the menu. Please try opening via a local server.";
          console.error(err);
        }
      }

      function setFilter(category) {
        const sections = [
          { id: "starters-section", key: "starters" },
          { id: "mains-section", key: "mains" },
          { id: "desserts-section", key: "desserts" },
        ];

        // Toggle sections visibility
        sections.forEach(({ id, key }) => {
          const el = document.getElementById(id);
          if (!el) return;
          if (category === "all" || category === key) {
            el.classList.remove("hidden");
          } else {
            el.classList.add("hidden");
          }
        });

        // Update active state on filter buttons
        document.querySelectorAll(".filter-btn").forEach((btn) => {
          btn.classList.toggle("is-active", btn.dataset.filter === category || (category === "all" && btn.dataset.filter === "all"));
        });
      }

      function wireFilters() {
        // Top filter bar
        document.querySelectorAll(".filter-btn").forEach((btn) => {
          btn.classList.add("ripple-container");
          btn.addEventListener("click", (e) => {
            setFilter(btn.dataset.filter);
            spawnRipple(e, btn);
          });
        });
        // Clickable section pills
        document.querySelectorAll("[data-filter].pill").forEach((pill) => {
          pill.classList.add("ripple-container");
          pill.addEventListener("click", (e) => {
            setFilter(pill.dataset.filter);
            spawnRipple(e, pill);
          });
        });

        // Order Now button handled in DOMContentLoaded
      }

      function setupReveal() {
        const items = document.querySelectorAll(".menu-item");
        if (!("IntersectionObserver" in window)) {
          items.forEach((el) => el.classList.add("is-revealed"));
          return;
        }
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-revealed");
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.12, rootMargin: "0px 0px -8% 0px" });
        items.forEach((el) => observer.observe(el));
      }

      function spawnRipple(event, el) {
        const rect = el.getBoundingClientRect();
        const ripple = document.createElement("span");
        ripple.className = "ripple";
        const size = Math.max(rect.width, rect.height) * 1.4;
        ripple.style.width = ripple.style.height = size + "px";
        ripple.style.left = (event.clientX - rect.left) + "px";
        ripple.style.top = (event.clientY - rect.top) + "px";
        el.appendChild(ripple);
        ripple.addEventListener("animationend", () => ripple.remove());
      }

      // Cart management
      let cart = []; // Array of { name, price, quantity, priceValue }

      function isOrderModalVisible() {
        const modal = document.getElementById("order-modal");
        return modal && !modal.classList.contains("hidden");
      }

      function renderCartContents() {
        const cartContents = document.getElementById("cart-contents");
        const itemCountEl = document.getElementById("modal-item-count");
        const totalEl = document.getElementById("modal-total");
        if (!cartContents || !itemCountEl || !totalEl) return;

        if (cart.length === 0) {
          cartContents.innerHTML = '<p style="text-align: center; color: var(--ink-dim); padding: 20px;">Your cart is empty. Add some items to your order!</p>';
          itemCountEl.textContent = "0";
          totalEl.textContent = currency.format(0);
          return;
        }

        const cartList = document.createElement("ul");
        cartList.className = "cart-list";

        cart.forEach(item => {
          const li = document.createElement("li");
          li.className = "cart-item";

          const itemTotal = item.priceValue * item.quantity;
          const topRow = document.createElement("div");
          topRow.className = "cart-item-top";

          const info = document.createElement("div");
          info.className = "cart-item-info";

          const nameEl = document.createElement("span");
          nameEl.className = "cart-item-name";
          nameEl.textContent = item.name;
          info.appendChild(nameEl);

          const priceEl = document.createElement("div");
          priceEl.className = "cart-item-price";
          priceEl.textContent = currency.format(itemTotal);

          topRow.appendChild(info);
          topRow.appendChild(priceEl);
          li.appendChild(topRow);

          const controls = document.createElement("div");
          controls.className = "cart-item-controls";

          const decreaseBtn = document.createElement("button");
          decreaseBtn.type = "button";
          decreaseBtn.className = "cart-control-btn cart-decrease-btn";
          decreaseBtn.setAttribute("aria-label", `Decrease quantity of ${item.name}`);
          decreaseBtn.textContent = "âˆ’";
          decreaseBtn.addEventListener("click", () => adjustCartItem(item.name, -1));

          const quantityEl = document.createElement("span");
          quantityEl.className = "cart-item-quantity";
          quantityEl.textContent = `Qty: ${item.quantity}`;

          const increaseBtn = document.createElement("button");
          increaseBtn.type = "button";
          increaseBtn.className = "cart-control-btn cart-increase-btn";
          increaseBtn.setAttribute("aria-label", `Increase quantity of ${item.name}`);
          increaseBtn.textContent = "+";
          increaseBtn.addEventListener("click", () => adjustCartItem(item.name, 1));

          const removeBtn = document.createElement("button");
          removeBtn.type = "button";
          removeBtn.className = "cart-control-btn cart-remove-btn";
          removeBtn.textContent = "Remove";
          removeBtn.addEventListener("click", () => removeCartItem(item.name));

          controls.appendChild(decreaseBtn);
          controls.appendChild(quantityEl);
          controls.appendChild(increaseBtn);
          controls.appendChild(removeBtn);

          li.appendChild(controls);
          cartList.appendChild(li);
        });

        cartContents.innerHTML = "";
        cartContents.appendChild(cartList);

        const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
        const totalAmount = cart.reduce((sum, item) => sum + (item.priceValue * item.quantity), 0);
        itemCountEl.textContent = String(totalCount);
        totalEl.textContent = currency.format(totalAmount);
      }

      function incrementCart(itemName, priceValue) {
        const existing = cart.find(item => item.name === itemName);
        if (existing) {
          existing.quantity += 1;
        } else {
          cart.push({ name: itemName, price: currency.format(priceValue), quantity: 1, priceValue: priceValue });
        }
        updateCartDisplay();
        if (isOrderModalVisible()) {
          renderCartContents();
        }
        const status = document.getElementById("status");
        if (status) {
          status.textContent = `Added "${itemName}" to order.`;
          setTimeout(() => { if (status.textContent?.includes(itemName)) status.textContent = ""; }, 1500);
        }
      }

      function updateCartDisplay() {
        const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);
        const cartTotal = cart.reduce((sum, item) => sum + (item.priceValue * item.quantity), 0);
        const badge = document.getElementById("cart-count");
        if (badge) badge.textContent = String(cartCount);
        const total = document.getElementById("cart-total");
        if (total) total.textContent = currency.format(cartTotal);
      }

      function adjustCartItem(itemName, delta) {
        const index = cart.findIndex(item => item.name === itemName);
        if (index === -1) return;
        const newQty = cart[index].quantity + delta;
        if (newQty <= 0) {
          removeCartItem(itemName);
          return;
        }
        cart[index].quantity = newQty;
        updateCartDisplay();
        if (isOrderModalVisible()) {
          renderCartContents();
        }
      }

      function removeCartItem(itemName) {
        const index = cart.findIndex(item => item.name === itemName);
        if (index === -1) return;
        cart.splice(index, 1);
        updateCartDisplay();
        const status = document.getElementById("status");
        if (status) {
          status.textContent = `Removed "${itemName}" from order.`;
          setTimeout(() => { if (status.textContent?.includes(itemName)) status.textContent = ""; }, 1500);
        }
        if (isOrderModalVisible()) {
          renderCartContents();
        }
      }

      function showOrderModal() {
        const modal = document.getElementById("order-modal");
        if (!modal) return;
        modal.classList.remove("hidden");
        document.body.style.overflow = "hidden";
        renderCartContents();
      }

      function hideOrderModal() {
        const modal = document.getElementById("order-modal");
        if (modal) modal.classList.add("hidden");
        document.body.style.overflow = "";
      }

      function generateOrderId() {
        if (typeof crypto !== "undefined" && crypto.randomUUID) {
          return crypto.randomUUID();
        }
        const timestamp = Date.now().toString(36);
        const random = Math.random().toString(36).slice(2, 8);
        return `ORD-${timestamp}-${random}`.toUpperCase();
      }

      function finalizeOrder() {
        if (cart.length === 0) {
          alert("Your cart is empty!");
          hideOrderModal();
          return;
        }
        const orderTypeInput = document.getElementById("order-type");
        const orderType = orderTypeInput.value;
        if (!orderType) {
          alert("Please select an order type!");
          return;
        }
        const customerInput = document.getElementById("customer-name");
        const customerName = customerInput?.value.trim() || "Guest";
        const totalAmount = cart.reduce((sum, item) => sum + (item.priceValue * item.quantity), 0);
        const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
        const orderDetails = {
          id: generateOrderId(),
          customerName,
          type: orderType,
          items: cart.map(i => ({ name: i.name, qty: i.quantity, price: i.priceValue })),
          itemCount: totalCount,
          total: totalAmount,
          createdAt: new Date().toISOString()
        };
        saveOrderToLocal(orderDetails);
        appendOrderToCsv(orderDetails);
        alert(`Order finalized!\n\nğŸ“‹ Order Type: ${orderType}\nğŸ“¦ Items: ${totalCount}\nğŸ’° Total: ${currency.format(totalAmount)}\n\nThank you for your order!`);
        cart = [];
        updateCartDisplay();
        orderTypeInput.value = "";
        if (customerInput) customerInput.value = "";
        document.querySelectorAll(".order-type-btn").forEach(btn => btn.classList.remove("active"));
        hideOrderModal();
        const status = document.getElementById("status");
        if (status) {
          status.textContent = "Order finalized successfully!";
          setTimeout(() => { status.textContent = ""; }, 3000);
        }
      }

      // Cloud storage configuration
      const CLOUD_STORAGE_URL = 'https://api.jsonbin.io/v3/b';
      const API_KEY = '$2a$10$7x8x9x0x1x2x3x4x5x6x7x8'; // Free public API key (replace with your own if needed)
      
      // Fixed shared bin ID - all devices use the same ID for automatic sync
      // This ensures all devices automatically share the same data
      const SHARED_BIN_ID = 'restaurant-orders-shared';
      
      // Get the shared bin ID (same for all devices)
      function getBinId() {
        return SHARED_BIN_ID;
      }

      // Sync orders to cloud
      async function syncOrdersToCloud(orders, csvData) {
        try {
          const binId = getBinId();
          const data = {
            orders: orders,
            csvData: csvData || '',
            lastUpdated: new Date().toISOString()
          };
          
          const response = await fetch(`${CLOUD_STORAGE_URL}/${binId}`, {
            method: 'PUT',
            headers: {
              'Content-Type': 'application/json',
              'X-Master-Key': API_KEY
            },
            body: JSON.stringify(data)
          });
          
          if (!response.ok) {
            throw new Error('Failed to sync to cloud');
          }
          return true;
        } catch (error) {
          console.error('Cloud sync error:', error);
          return false;
        }
      }

      // Load orders from cloud
      async function loadOrdersFromCloud() {
        try {
          const binId = getBinId();
          const response = await fetch(`${CLOUD_STORAGE_URL}/${binId}/latest`, {
            headers: {
              'X-Master-Key': API_KEY
            }
          });
          
          if (!response.ok) {
            // Bin doesn't exist yet, return empty
            return { orders: [], csvData: '' };
          }
          
          const result = await response.json();
          const data = result.record || {};
          return {
            orders: data.orders || [],
            csvData: data.csvData || ''
          };
        } catch (error) {
          console.error('Cloud load error:', error);
          return { orders: [], csvData: '' };
        }
      }

      // LocalStorage helpers for demo orders
      function getSavedOrders() {
        try {
          const raw = localStorage.getItem('demo_orders');
          return raw ? JSON.parse(raw) : [];
        } catch (e) {
          console.error('Failed to parse saved orders', e);
          return [];
        }
      }

      async function saveOrderToLocal(order) {
        try {
          const all = getSavedOrders();
          all.unshift(order); // most recent first
          localStorage.setItem('demo_orders', JSON.stringify(all));
          
          // Sync to cloud
          const csvData = localStorage.getItem(GLOBAL_ORDER_CSV_KEY) || '';
          await syncOrdersToCloud(all, csvData);
          
          const status = document.getElementById('status');
          if (status) {
            status.textContent = 'Order saved and synced to cloud.';
            setTimeout(() => { status.textContent = ''; }, 2500);
          }
        } catch (e) {
          console.error('Unable to save order', e);
        }
      }

      function ordersToCsv(orders) {
        const escape = (value) => `"${String(value ?? "").replace(/"/g, '""')}"`;
        const header = ["Order ID", "Customer Name", "Order Type", "Item Count", "Total", "Created At", "Items"];
        const rows = orders.map(order => {
          const itemsSummary = (order.items ?? []).map(it => `${it.name} x${it.qty} @ ${it.price != null ? it.price.toFixed(2) : ""}`).join(" | ");
          return [
            order.id ?? "",
            order.customerName ?? "",
            order.type ?? "",
            order.itemCount ?? 0,
            order.total != null ? order.total.toFixed(2) : "",
            order.createdAt ? new Date(order.createdAt).toLocaleString() : "",
            itemsSummary
          ];
        });
        const csvLines = [header.map(escape).join(",")];
        rows.forEach(row => csvLines.push(row.map(escape).join(",")));
        return csvLines.join("\r\n");
      }

      const GLOBAL_ORDER_CSV_KEY = 'demo_orders_csv';

      async function appendOrderToCsv(order) {
        const existing = localStorage.getItem(GLOBAL_ORDER_CSV_KEY);
        let csv = existing ?? "";
        const escape = (value) => `"${String(value ?? "").replace(/"/g, '""')}"`;
        const formatRow = (row) => row.map(escape).join(",");

        if (!existing) {
          const header = ["Order ID", "Customer Name", "Order Type", "Item Count", "Total", "Created At", "Items"];
          csv += formatRow(header) + "\r\n";
        }

        const itemsSummary = (order.items ?? []).map(it => `${it.name} x${it.qty} @ ${currency.format(it.price)}`).join(" | ");
        const row = [
          order.id ?? "",
          order.customerName ?? "",
          order.type ?? "",
          order.itemCount ?? 0,
          order.total != null ? order.total.toFixed(2) : "",
          order.createdAt ? new Date(order.createdAt).toLocaleString() : "",
          itemsSummary
        ];
        csv += formatRow(row) + "\r\n";
        localStorage.setItem(GLOBAL_ORDER_CSV_KEY, csv);
        
        // Sync CSV to cloud
        const orders = getSavedOrders();
        await syncOrdersToCloud(orders, csv);
      }

      function downloadOrdersCsvFile() {
        const csv = localStorage.getItem(GLOBAL_ORDER_CSV_KEY);
        if (!csv) {
          alert("No orders have been finalized yet.");
          return;
        }
        const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
        const url = URL.createObjectURL(blob);
        const link = document.createElement("a");
        link.href = url;
        link.download = "restaurant-orders.csv";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
      }

      function getFilteredOrders() {
        const orders = getSavedOrders();
        const orderTypeFilter = document.getElementById('filter-order-type')?.value || '';
        const customerFilter = (document.getElementById('filter-customer')?.value || '').toLowerCase().trim();
        const dateFilter = document.getElementById('filter-date')?.value || '';

        return orders.filter(order => {
          if (orderTypeFilter && order.type !== orderTypeFilter) return false;
          if (customerFilter && (!order.customerName || !order.customerName.toLowerCase().includes(customerFilter))) return false;
          if (dateFilter) {
            const orderDate = order.createdAt ? new Date(order.createdAt).toISOString().split('T')[0] : '';
            if (orderDate !== dateFilter) return false;
          }
          return true;
        });
      }

      function renderSavedOrders() {
        const container = document.getElementById('saved-orders-contents');
        if (!container) return;
        const orders = getFilteredOrders();
        
        if (!orders.length) {
          container.innerHTML = '<p style="color:var(--ink-dim); text-align:center; padding:40px;">No orders found. Try adjusting your filters.</p>';
          return;
        }

        const tableHTML = `
          <table class="orders-table">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer Name</th>
                <th>Order Type</th>
                <th>Items</th>
                <th>Item Count</th>
                <th>Total</th>
                <th>Date & Time</th>
              </tr>
            </thead>
            <tbody>
              ${orders.map(o => {
                const ts = o.createdAt ? new Date(o.createdAt).toLocaleString() : "";
                const itemsSummary = (o.items || []).map(it => `${it.name} (${it.qty})`).join(', ');
                return `
                  <tr>
                    <td><code>${o.id || 'N/A'}</code></td>
                    <td>${o.customerName || 'Guest'}</td>
                    <td><span class="order-type-badge order-type-${o.type?.toLowerCase().replace('-', '') || ''}">${o.type || 'N/A'}</span></td>
                    <td class="items-cell">${itemsSummary || 'N/A'}</td>
                    <td>${o.itemCount || 0}</td>
                    <td class="total-cell"><strong>${currency.format(o.total || 0)}</strong></td>
                    <td>${ts}</td>
                  </tr>
                `;
              }).join('')}
            </tbody>
          </table>
        `;
        container.innerHTML = tableHTML;
      }

      document.getElementById("year").textContent = new Date().getFullYear();
      // initialize header total formatting once currency is ready
      const totalSpan = document.getElementById("cart-total");
      if (totalSpan) totalSpan.textContent = currency.format(0);
      window.addEventListener("DOMContentLoaded", async () => {
        // Initialize language
        setLanguage(currentLanguage);
        
        // Language selector event listener
        const langSelect = document.getElementById('language-select');
        if (langSelect) {
          langSelect.addEventListener('change', (e) => {
            setLanguage(e.target.value);
          });
        }
        
        // Load orders from cloud on page load for cross-device sync
        try {
          const cloudData = await loadOrdersFromCloud();
          const localOrders = getSavedOrders();
          
          if (cloudData.orders && cloudData.orders.length > 0) {
            // Create a map of orders by ID for efficient lookup
            const localOrderMap = new Map(localOrders.map(o => [o.id, o]));
            const cloudOrderMap = new Map(cloudData.orders.map(o => [o.id, o]));
            
            // Merge: use cloud data if it exists, otherwise keep local
            const mergedOrders = [];
            const allOrderIds = new Set([...localOrderMap.keys(), ...cloudOrderMap.keys()]);
            
            allOrderIds.forEach(orderId => {
              // Prefer cloud data if available (it's more up-to-date)
              const order = cloudOrderMap.get(orderId) || localOrderMap.get(orderId);
              if (order) mergedOrders.push(order);
            });
            
            // Sort by date (newest first)
            mergedOrders.sort((a, b) => {
              const dateA = new Date(a.createdAt || 0);
              const dateB = new Date(b.createdAt || 0);
              return dateB - dateA;
            });
            
            // Save merged orders
            localStorage.setItem('demo_orders', JSON.stringify(mergedOrders));
            
            // Use cloud CSV if available, otherwise keep local
            if (cloudData.csvData) {
              localStorage.setItem(GLOBAL_ORDER_CSV_KEY, cloudData.csvData);
            }
            
            // Sync merged data back to cloud to ensure consistency
            const finalCsv = localStorage.getItem(GLOBAL_ORDER_CSV_KEY) || '';
            await syncOrdersToCloud(mergedOrders, finalCsv);
          } else if (localOrders.length > 0) {
            // If no cloud data but we have local data, sync it to cloud
            const localCsv = localStorage.getItem(GLOBAL_ORDER_CSV_KEY) || '';
            await syncOrdersToCloud(localOrders, localCsv);
          }
        } catch (error) {
          console.error('Failed to load from cloud:', error);
        }
        
        loadMenu().then(() => {
          wireFilters();
          
          // Order type button handlers
          document.querySelectorAll(".order-type-btn").forEach(btn => {
            btn.addEventListener("click", () => {
              document.querySelectorAll(".order-type-btn").forEach(b => b.classList.remove("active"));
              btn.classList.add("active");
              document.getElementById("order-type").value = btn.dataset.type;
            });
          });
          
          // Modal event handlers
          const orderBtn = document.getElementById("cta-order");
          if (orderBtn) {
            orderBtn.addEventListener("click", (e) => {
              spawnRipple(e, orderBtn);
              showOrderModal();
            });
          }

          const closeBtn = document.querySelector(".modal-close");
          if (closeBtn) {
            closeBtn.addEventListener("click", hideOrderModal);
          }

          const cancelBtn = document.getElementById("cancel-order");
          if (cancelBtn) {
            cancelBtn.addEventListener("click", hideOrderModal);
          }

          const finalizeBtn = document.getElementById("finalize-order");
          if (finalizeBtn) {
            finalizeBtn.addEventListener("click", finalizeOrder);
          }

          const modal = document.getElementById("order-modal");
          if (modal) {
            modal.addEventListener("click", (e) => {
              if (e.target === modal) hideOrderModal();
            });
          }

          // Saved orders modal handlers
          const viewSavedBtn = document.getElementById('view-saved-orders');
          const savedModal = document.getElementById('saved-orders-modal');
          const savedClose = document.getElementById('saved-modal-close');
          const savedCloseBtn = document.getElementById('close-saved-orders');
          const clearSaved = document.getElementById('clear-saved-orders');
        const downloadOrdersBtn = document.getElementById('download-orders');
        const managerOrdersBtn = document.getElementById('manager-orders');
        const openSavedOrders = () => {
          if (!savedModal) return;
              renderSavedOrders();
              savedModal.classList.remove('hidden');
              document.body.style.overflow = 'hidden';
        };
        if (viewSavedBtn && savedModal) {
          viewSavedBtn.addEventListener('click', openSavedOrders);
          }
        if (managerOrdersBtn) managerOrdersBtn.addEventListener('click', openSavedOrders);
        document.addEventListener('keydown', (e) => {
          if (e.altKey && e.shiftKey && e.key.toLowerCase() === 'o') {
            e.preventDefault();
            openSavedOrders();
          }
        });
          if (savedClose) savedClose.addEventListener('click', () => { savedModal.classList.add('hidden'); document.body.style.overflow = ''; });
          if (savedCloseBtn) savedCloseBtn.addEventListener('click', () => { savedModal.classList.add('hidden'); document.body.style.overflow = ''; });
        if (clearSaved) clearSaved.addEventListener('click', async () => {
          localStorage.removeItem('demo_orders');
          localStorage.removeItem(GLOBAL_ORDER_CSV_KEY);
          // Clear cloud storage
          await syncOrdersToCloud([], '');
          renderSavedOrders();
        });
        if (downloadOrdersBtn) downloadOrdersBtn.addEventListener('click', downloadOrdersCsvFile);

          // Filter event listeners
          const filterOrderType = document.getElementById('filter-order-type');
          const filterCustomer = document.getElementById('filter-customer');
          const filterDate = document.getElementById('filter-date');
          const resetFiltersBtn = document.getElementById('reset-filters');

          if (filterOrderType) filterOrderType.addEventListener('change', renderSavedOrders);
          if (filterCustomer) filterCustomer.addEventListener('input', renderSavedOrders);
          if (filterDate) filterDate.addEventListener('change', renderSavedOrders);
          if (resetFiltersBtn) {
            resetFiltersBtn.addEventListener('click', () => {
              if (filterOrderType) filterOrderType.value = '';
              if (filterCustomer) filterCustomer.value = '';
              if (filterDate) filterDate.value = '';
              renderSavedOrders();
            });
          }

          // Close modal on Escape key (both modals)
          document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") {
              const modalEl = document.getElementById("order-modal");
              if (modalEl && !modalEl.classList.contains("hidden")) {
                hideOrderModal();
              }
              const sm = document.getElementById('saved-orders-modal');
              if (sm && !sm.classList.contains('hidden')) {
                sm.classList.add('hidden');
                document.body.style.overflow = '';
              }
            }
          });
        });
      });
    </script>
  </body>
  </html>


